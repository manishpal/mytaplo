<div class="container secPdng animated">
	<div class="col-sm-12">
	<span class="h3">Transactions</span>

	<ul class="cartTable">
    					<li class="cartHead clearfix">
    						<div class="col-sm-2">currency</div>
    						<div class="col-sm-2">amount</div>
    						<div class="col-sm-2">Recieving/Paying</div>
    						<div class="col-sm-2">Date</div>
    						<div class="col-sm-2">Hedge Price</div>
    						<div class="col-sm-2">Action</div>
    					</li>
    					<li class="singleIteam clearfix category-host"> 
    						<div class="col-sm-2">
    							USD
    						</div>
    						<div class="col-sm-2">
    							40 $
    						</div>

    						<div class="col-sm-2">
    							Recieving
    						</div>
    						<div class="col-sm-2">
    							24-07-2017
    						</div>

    						<div class="col-sm-2">
    							Hedged
    						</div>

    						<div class="col-sm-2">
    							<a href="#" class="remove_transaction"  data-id="">Remove</a>
    						</div>
    					</li>
    					
    					<li class="coupon clearfix">
    						<form action="#" class="couponForm">
    							<div class="col-sm-2 dropdowncell">
	    							<div class="duration">
		    							<span>USD</span>
		    							<ul class="cartOpt">
		    								<li data-code="USD" data-price="$10">USD</li>
		    								<li data-code="GBP" data-price="$15">GBP</li>
		    								<li data-code="EURO" data-price="$30">EURO</li>
		    							</ul>
	    							</div>
    							</div>
    							<div class="col-sm-3">
    								<input type="text" placeholder="Amount">
    							</div>
    							<div class="col-sm-2 dropdowncell">
	    							<div class="duration">
		    							<span>Select</span>
		    							<ul class="cartOpt">
		    								<li data-code="Recieving" data-price="$10">Recieving</li>
		    								<li data-code="Paying" data-price="$15">Paying</li>
		    							</ul>
	    							</div>
    							</div>
    							
    							<div class="col-sm-3">
    								<input type="text" placeholder="Date" class="datepicker" />
    							</div>

    							<div class="col-sm-2">
    								<button id="add_transaction" type="submit">Add transaction</button>
    							</div>
    						</form>
    					</li>
    				</ul>
	</div>
</div>


<script type="text/javascript">
        function addTransactionRemoveListener() {
            $('.remove_transaction').click(function(){
                $.ajax({
                    url : '/transactions/remove',
                    type : 'POST',
                    dataType : 'json',
                    contentType : 'application/json',
                    data : JSON.stringify({
                        id : $(this).attr("data-id")
                    })
                }).done(function(resp){
                    console.log("got response", resp);
                });

                return false;
            });
        };


        function addTransactionRow(data) {
            var templatString = `<li class="singleIteam clearfix category-host"> 
                            <div class="col-sm-2">
                                DATA_CURRENCY
                            </div>
                            <div class="col-sm-2">
                                DATA_AMOUNT
                            </div>

                            <div class="col-sm-2">
                                DATA_CREDIT
                            </div>
                            <div class="col-sm-2">
                                DATA_DATE
                            </div>

                            <div class="col-sm-2">
                                DATA_HEDGED
                            </div>

                            <div class="col-sm-2">
                                <a href="#" class="remove_transaction"  data-id="DATA_ID">Remove</a>
                            </div>
                        </li>

            `;

            templateString = templateString.replace("DATA_CURRENCY", data.currency);
            templateString = templateString.replace("DATA_AMOUNT", data.amount);
            templateString = templateString.replace("DATA_CREDIT", data.credit? 'Recieving' : 'Paying');
            templateString = templateString.replace("DATA_DATE", data.transactionDate);
            templateString = templateString.replace("DATA_HEDGED", data.hedged);
            templateString = templateString.replace("DATA_ID", data.id);
            $(templateString).insertBefore('.coupon');



        }
  
        $(document).ready(function(){
            
            addTransactionRemoveListener();

            $('#add_transaction').click(function(){
                $.ajax({
                    url : '/transactions/add',
                    type : 'POST',
                    dataType : 'json',
                    contentType: "application/json",
                    data: JSON.stringify({
                        currency: 'USD',
                        amount : 40000,
                        credit : true,
                        transactionDate : '20-04-2017'
                    })
                }).done(function(resp){
                    console.log("got response", resp);
                    if(resp.status === "Success"){
                        addTransactionRow(resp.results.data);
                    }
                });
                return false;
            });
        
        });
	
</script>